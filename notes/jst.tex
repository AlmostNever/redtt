\documentclass{article}
\usepackage{stmaryrd}
\usepackage[landscape]{geometry}
% \usepackage{fullpage}
\usepackage{jst}
\usepackage{mathpartir}
\usepackage{notation}

\newcommand\Eval[2]{
  \FmtFam{
    {\left\llbracket\FmtTm{#1}\right\rrbracket}_{\FmtVal{#2}}
  }
}

\title{cubical evaluation semantics}
\author{Carlo Angiuli \and Jon Sterling}

\begin{document}
\maketitle


Colors: \FmtTm{terms}, \FmtFam{value families}, \FmtVal{values}, \FmtRst{restrictions}.

\begin{align*}
  \Eval{
    \TLam{M}
  }{\rho}
  &=
  \Fam{\phi}{
    \VLam{
      \VClo{M}{\rho}{\phi}
    }
  }
  \\
  \Eval{
    \TPi{A}{B}
  }{\rho}
  &=
  \Fam{\phi}{
    \VPi{
      \Rst{\phi}{\Eval{A}{\rho}}
    }{
      \VClo{B}{\rho}{\phi}
    }
  }
  \\
  \Eval{
    \TApp{M}{N}
  }{\rho}
  &=
  \SemApp{
    \Eval{M}{\rho}
  }{
    \Eval{N}{\rho}
  }
  \\
  \Eval{
    \TVar{i}
  }{\rho}
  &=
  \Fam{\_}{
    \rho_i
  }
\end{align*}

\begin{align*}
  \SemApp{F}{G}
  &=
  \Fam{\phi}{
    \begin{cases}
      \Cond{
        \FamTest{F}{\phi}
        \equiv
        \VLam{
          \VClo{M}{\rho}{\psi}
        }
      }{
        \Rst{\phi\circ\psi}{\Eval{M}{\rho, \FamTest{G}{\phi}}}
      }
      \\
      \Cond{
        \FamTest{F}{\phi}
        \equiv
        \Hole{neutral}
      }{
        \Hole{neutral}
      }
      \\
      \Cond{
        \FamTest{F}{\phi}
        \equiv
        \Hole{coe}
      }{
        \Hole{coe}
      }
      \\
      \Cond{
        \FamTest{F}{\phi}
        \equiv
        \Hole{hcom}
      }{
        \Hole{hcom}
      }
    \end{cases}
  }
\end{align*}

\end{document}
